#!/bin/sh

# This script is called on startup to remap keys.
# Decrease key repeat delay to 300ms and increase key repeat rate to 50 per second.
xset r rate 300 50
# Set layout, clear options and enable layout toggling with right alt. See man xkeyboard-config
setxkbmap -layout us,ua -option -option grp:ctrl_shift_toggle
# Map the caps lock key to super, and map the menu key to right super.
setxkbmap -option caps:super,altwin:menu_win
# When caps lock is pressed only once, treat it as escape.
killall xcape 2>/dev/null ; xcape -e 'Super_L=Escape';
# When control is pressed only once, treat it as a dollar sign.
# xcape -e 'Control_R=Shift_L|4' ;
# Turn off caps lock if on since there is no longer a key for it.
xset -q | grep -q "Caps Lock:\s*on" && xdotool key Caps_Lock
